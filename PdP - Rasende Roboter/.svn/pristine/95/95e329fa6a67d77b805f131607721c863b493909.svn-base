package view;

import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.InetAddress;
import java.net.UnknownHostException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SpringLayout;

import model.Server;
import model.Client;

import controller.Controller;

public class StartMultiView extends AbstractView {

	public StartMultiView(Controller c, JFrame f) {
		super(c, f);
		buildContentPane();
	}

	@Override
	public void buildContentPane() {
		SpringLayout layout = new SpringLayout();
		contentPane.setLayout(layout);
		
		//Title
		JLabel screenTitle = new JLabel("MultiPlayer");
		screenTitle.setFont(new Font("Serif", Font.PLAIN, 36));
		layout.putConstraint(SpringLayout.HORIZONTAL_CENTER, screenTitle, 0, SpringLayout.HORIZONTAL_CENTER, contentPane);
		layout.putConstraint(SpringLayout.NORTH, screenTitle, 30, SpringLayout.NORTH, contentPane);
		contentPane.add(screenTitle);
		
		//New Server
		JButton newServer = positionButton(layout, "Create New Server", 0, 150, "HorizontalCenter", "North", contentPane);
		contentPane.add(newServer);
		
		newServer.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent arg0) {
				new Server();
				//controller.createInGameView();
			}
		});
		
		
		//Connection with IP
		JLabel labelIP = new JLabel ("IP Adress:");
		labelIP.setFont(new Font("Serif", Font.PLAIN, 20));
		layout.putConstraint(SpringLayout.HORIZONTAL_CENTER, labelIP, 0, SpringLayout.HORIZONTAL_CENTER, contentPane);
		layout.putConstraint(SpringLayout.NORTH, labelIP, 250, SpringLayout.NORTH, contentPane);
		contentPane.add(labelIP);
		
		final JTextField ipField=new JTextField();
		ipField.setPreferredSize(new Dimension(300, 30));
		layout.putConstraint(SpringLayout.HORIZONTAL_CENTER, ipField, 0, SpringLayout.HORIZONTAL_CENTER, contentPane);
		layout.putConstraint(SpringLayout.NORTH, ipField, 300, SpringLayout.NORTH, contentPane);
		contentPane.add(ipField);
		
		JButton buttonJoin = positionButton(layout, "Join Game", 0, 350, "HorizontalCenter", "North", contentPane);
		contentPane.add(buttonJoin);
				
		buttonJoin.addActionListener(new ActionListener() {
					
			 public void actionPerformed(ActionEvent arg0) {
				String ipString=ipField.getText();
				try {
					new Client(InetAddress.getByName(ipString));
				} catch (UnknownHostException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			 }
			});
		frame.pack();		
		
	}

}
