package model;

import java.util.List;

import model.Constant.Color;
import model.Constant.Direction;

/**
 * Class containing the data of a robot (positions, color)
 */
public class Robot {
	public int x;
	public int y;
	public int originX;
	public int originY;
	/**
	 * @see Color
	 */
	private Color color;

	public Robot(Color c) {
		color = c;
	}

	public Robot(int x, int y, Color color) {
		this.x = x;
		this.y = y;
		this.originX = x;
		this.originY = y;
		this.color = color;
	}

	public Robot(Robot r) {
		this(r.x, r.y, r.color);
		this.originX = r.originX;
		this.originY = r.originY;
		
	}

	/**
	 * Place a new Robot on the board
	 * @param robots : List<Robot>, set of the robots already on the board, use to know if the new robot is alone on the box
	 */
	public Robot placeOnBoard(List<Robot> robots) {
		boolean isAlone; //Is the robot alone on the box ?

		do {
			isAlone = true;
			do 
				x = (int)(Math.random() * (15 + 1)); // robots positions are between box 0 and box 15 without boxes 7 and 8
			while(x == 7 || x == 8);

			do
				y = (int)(Math.random() * (15 + 1));
			while(x == 7 || x == 8);

			for(Robot r : robots) {
				if((x == r.x) && (y == r.y))
					isAlone = false;
			}

		}while(!isAlone);

		originX = x;
		originY = y;
		return this;
	}

	public int getX() {
		return x;
	}

	public void setX(int x) {
		this.x = x;
	}

	public int getY() {
		return y;
	}

	public void setY(int y) {
		this.y = y;
	}

	public Color getColor() {
		return color;
	}

	public void setColor(Color color) {
		this.color = color;
	}

	public int getOriginX() {
		return originX;
	}

	public void setOriginX(int originX) {
		this.originX = originX;
	}

	public int getOriginY() {
		return originY;
	}

	public void setOriginY(int originY) {
		this.originY = originY;
	}

	public boolean robotIsHere(int x, int y, List<Robot> robots, Direction direction){
		for(Robot r: robots){
			switch (direction) {
			case Right:
				if (r.getX() == x+1 && r.getY()== y)
					return true;
				break;
			case Left:
				if (r.getX()== x-1 && r.getY()== y)
					return true;
				break;
			case Down:
				if (r.getY()== y+1 && r.getX()== x)
					return true;
				break;
			case Up:
				if (r.getY()==y-1 && r.getX()== x)
					return true;
				break;
			}
		}
		return false;
	}
	
	public String toString(){
		return color + " robot : current position (" + x + "," + y + ") original position (" + originX + "," + originY + ")";
	}
}
